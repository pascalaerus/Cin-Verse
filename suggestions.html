<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cin√©Verse | Suggestions</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
    --primary-color: #e50914;
    --bg-dark: #0f0f0f;
    --card-bg: #1a1a1a;
    --text-light: #ffffff;
    --text-gray: #b3b3b3;
}
body { margin:0; font-family:'Poppins', sans-serif; background:var(--bg-dark); color:var(--text-light); }
header { padding:20px; text-align:center; background:#111; }
.logo { font-size:2.5rem; font-weight:700; color: var(--primary-color); margin-bottom:10px; }
.ngl-btn { display:inline-block; padding:10px 20px; background:#ffcc00; color:#111; font-weight:600; border-radius:8px; text-decoration:none; margin-top:10px; transition:0.3s; }
.ngl-btn:hover { background:#e6b800; transform:scale(1.05); }

.container { max-width:1000px; margin:30px auto; padding:0 20px; }
.section-title { font-size:1.8rem; margin:20px 0; color:var(--primary-color); border-left:4px solid var(--primary-color); padding-left:10px; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; margin-bottom:40px; }
.card { background:var(--card-bg); padding:15px; border-radius:12px; border:1px solid #222; display:flex; flex-direction:column; }
.card img { border-radius:8px; width:100%; height:auto; margin-bottom:10px; }
.card h3 { font-size:1.1rem; margin:5px 0; }
.card p { font-size:0.9rem; color:var(--text-gray); overflow:hidden; height:60px; transition:0.3s; }
.card .toggle-overview { background:none; border:none; color:#ffcc00; cursor:pointer; font-size:0.8rem; margin-top:5px; }
.card .request-btn { padding:8px 12px; background:var(--primary-color); color:white; border:none; border-radius:8px; cursor:pointer; margin-top:10px; transition:0.3s; }
.card .request-btn:hover { background:#ff3b2f; transform:scale(1.05); }
footer { text-align:center; padding:30px; color:var(--text-gray); border-top:1px solid #222; margin-top:50px; }
</style>
</head>
<body>

<header>
<div class="logo">Cin√©Verse | Suggestions</div>
<a href="https://ngl.link/pascal_aerus22519" target="_blank" class="ngl-btn">üíå Suggestions anonymes</a>
</header>

<div class="container">

<h2 class="section-title">Films populaires</h2>
<div class="grid" id="filmsGrid"></div>

<h2 class="section-title">S√©ries populaires</h2>
<div class="grid" id="seriesGrid"></div>

</div>

<footer>
<p>&copy; 2026 Cin√©Verse | Cr√©√© par Pascal A√©rus</p>
</footer>

<script>
const TMDB_API_KEY = "343afb1d4a8c081ad737a2aef2f96d9a";
let currentFilmPage = 1;
let currentTVPage = 1;
let loadingFilms = false;
let loadingTV = false;

const filmsGrid = document.getElementById("filmsGrid");
const seriesGrid = document.getElementById("seriesGrid");

function createCard(item, type){
    const card = document.createElement("div");
    card.classList.add("card");

    const poster = item.poster_path ? `https://image.tmdb.org/t/p/w500${item.poster_path}` : 'https://via.placeholder.com/500x750?text=No+Image';
    card.innerHTML = `
        <img src="${poster}" alt="${item.title || item.name}">
        <h3>${item.title || item.name}</h3>
        <p class="overview">${item.overview || 'Pas de description.'}</p>
        <button class="toggle-overview">Voir plus</button>
        <button class="request-btn">Demander ${type==="movie"?"ce film":"cette s√©rie"}</button>
    `;

    const toggleBtn = card.querySelector(".toggle-overview");
    const p = card.querySelector(".overview");
    toggleBtn.addEventListener("click", ()=>{
        if(p.style.height === "auto"){
            p.style.height = "60px";
            toggleBtn.textContent = "Voir plus";
        } else {
            p.style.height = "auto";
            toggleBtn.textContent = "Voir moins";
        }
    });

    card.querySelector(".request-btn").addEventListener("click", ()=>{
        const phone = "22996326185";
        const title = item.title || item.name;
        const message = `üé¨ *NOUVELLE DEMANDE CIN√âVERSE* üé¨%0A%0A`+
                        `üéûÔ∏è *Titre:* ${title}%0A`+
                        `üìå *Type:* ${type==="movie"?"Film":"S√©rie"}%0A`+
                        `%0A_Demande effectu√©e depuis le site web._`;
        window.open(`https://wa.me/${phone}?text=${message}`,'_blank');
    });

    if(type==="movie") filmsGrid.appendChild(card);
    else seriesGrid.appendChild(card);
}

async function loadFilms(){
    if(loadingFilms) return;
    loadingFilms = true;
    let res = await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${TMDB_API_KEY}&language=fr&page=${currentFilmPage}`);
    let data = await res.json();
    data.results.forEach(item => createCard(item,"movie"));
    currentFilmPage++;
    loadingFilms = false;
}

async function loadTV(){
    if(loadingTV) return;
    loadingTV = true;
    let res = await fetch(`https://api.themoviedb.org/3/tv/popular?api_key=${TMDB_API_KEY}&language=fr&page=${currentTVPage}`);
    let data = await res.json();
    data.results.forEach(item => createCard(item,"tv"));
    currentTVPage++;
    loadingTV = false;
}

// Scroll infini pour films et s√©ries
window.addEventListener("scroll", ()=>{
    if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 200){
        loadFilms();
        loadTV();
    }
});

// Charger la premi√®re page
loadFilms();
loadTV();
</script>

</body>
</html>