<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cin√©Verse | Suggestions</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
    --primary-color: #e50914;
    --secondary-color: #ffcc00;
    --bg-dark: #0f0f0f;
    --card-bg: #1a1a1a;
    --text-light: #ffffff;
    --text-gray: #b3b3b3;
}
body { font-family: 'Poppins', sans-serif; background-color: var(--bg-dark); color: var(--text-light); margin:0; }
header { text-align:center; padding:40px 20px; }
header h1 { color: var(--primary-color); font-size:2.5rem; }
.btn { padding:10px 20px; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s; text-align:center; display:inline-block; margin-top:10px; text-decoration:none; }
.btn-req { background: var(--primary-color); color:white; width:100%; }
.btn-req:hover { opacity:0.9; }
.btn-anon { background: var(--secondary-color); color:#000; font-size:1rem; padding:12px 20px; margin-bottom:20px; display:inline-block; }
.btn-anon:hover { opacity:0.85; }
.section-title { font-size:1.6rem; margin:30px 20px 15px; color: var(--primary-color); border-left:4px solid var(--primary-color); padding-left:10px; display:inline-block; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:15px; padding:0 20px 40px; }
.card { background: var(--card-bg); border-radius:12px; overflow:hidden; text-align:center; transition:0.3s; border:1px solid #222; display:flex; flex-direction:column; }
.card img { width:100%; display:block; }
.card-content { padding:15px; flex-grow:1; display:flex; flex-direction:column; }
.card-content h3 { font-size:1.1rem; margin-bottom:10px; }
.card-content p { font-size:0.9rem; color: var(--text-gray); flex-grow:1; }
.card-content p.more { display:none; }
.see-more { font-size:0.85rem; color: var(--secondary-color); cursor:pointer; margin-top:5px; }
</style>
</head>
<body>

<header>
    <h1>Cin√©Verse | Suggestions</h1>
    <a href="https://ngl.link/pascal_aerus22519" target="_blank" class="btn btn-anon">üíå Suggestions anonymes</a>
</header>

<h2 class="section-title">Films populaires</h2>
<div class="grid" id="moviesGrid"></div>

<h2 class="section-title">S√©ries populaires</h2>
<div class="grid" id="seriesGrid"></div>

<script>
const TMDB_API_KEY = "343afb1d4a8c081ad737a2aef2f96d9a";
const moviesGrid = document.getElementById("moviesGrid");
const seriesGrid = document.getElementById("seriesGrid");
let moviesPage = 1;
let seriesPage = 1;

// Cr√©er les cartes de contenu
function createCard(title, overview, poster, type){
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
        <img src="https://image.tmdb.org/t/p/w500${poster}" alt="${title}">
        <div class="card-content">
            <h3>${title}</h3>
            <p>${overview.length > 150 ? overview.substring(0,150)+"..." : overview}</p>
            <p class="more">${overview}</p>
            ${overview.length>150?'<span class="see-more">Voir plus</span>':''}
            <button class="btn btn-req" onclick="requestContent('${title}','${type}')">Demander ce ${type.toLowerCase()}</button>
        </div>
    `;
    // Voir plus
    const seeMore = card.querySelector('.see-more');
    if(seeMore){
        seeMore.addEventListener('click', ()=>{
            const fullText = card.querySelector('.more');
            if(fullText.style.display === 'block'){ 
                fullText.style.display='none';
                seeMore.innerText='Voir plus';
            } else { 
                fullText.style.display='block'; 
                seeMore.innerText='Voir moins';
            }
        });
    }
    return card;
}

// Charger films
async function loadMovies(){
    const res = await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${TMDB_API_KEY}&language=fr&page=${moviesPage}`);
    const data = await res.json();
    data.results.forEach(movie=>{
        moviesGrid.appendChild(createCard(movie.title, movie.overview, movie.poster_path, "Film"));
    });
    moviesPage++;
}

// Charger s√©ries
async function loadSeries(){
    const res = await fetch(`https://api.themoviedb.org/3/tv/popular?api_key=${TMDB_API_KEY}&language=fr&page=${seriesPage}`);
    const data = await res.json();
    data.results.forEach(tv=>{
        seriesGrid.appendChild(createCard(tv.name, tv.overview, tv.poster_path, "S√©rie"));
    });
    seriesPage++;
}

// Scroll infini
window.addEventListener('scroll', () => {
    if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 100){
        loadMovies();
        loadSeries();
    }
});

// Bouton demander contenu
function requestContent(title,type){
    const phone = "22996326185";
    const message = `üé¨ *NOUVELLE DEMANDE CIN√âVERSE* üé¨%0A%0A`+
                    `üìå *Type:* ${type}%0A`+
                    `üéûÔ∏è *Titre:* ${title}%0A`+
                    `%0A_Demande effectu√©e depuis le site web._`;
    window.open(`https://wa.me/${phone}?text=${message}`,'_blank');
}

// Appel initial
loadMovies();
loadSeries();
</script>

</body>
</html>