<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cin√©Verse | Suggestions</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
    --primary-color: #e50914;
    --bg-dark: #0f0f0f;
    --card-bg: #1a1a1a;
    --text-light: #ffffff;
    --text-gray: #b3b3b3;
}
body { margin:0; font-family:'Poppins', sans-serif; background:var(--bg-dark); color:var(--text-light); }
header { padding:20px; text-align:center; background:#111; }
.logo { font-size:2.5rem; font-weight:700; color: var(--primary-color); }
.container { max-width:1000px; margin:30px auto; padding:0 20px; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; }
.card { background:var(--card-bg); padding:15px; border-radius:12px; border:1px solid #222; display:flex; flex-direction:column; }
.card img { border-radius:8px; width:100%; height:auto; margin-bottom:10px; }
.card h3 { font-size:1.1rem; margin:5px 0; }
.card p { font-size:0.9rem; color:var(--text-gray); overflow:hidden; height:60px; transition:0.3s; }
.card .request-btn { padding:8px 12px; background:var(--primary-color); color:white; border:none; border-radius:8px; cursor:pointer; margin-top:auto; transition:0.3s; }
.card .request-btn:hover { background:#ff3b2f; transform:scale(1.05); }
.card .toggle-overview { background:none; border:none; color:#ffcc00; cursor:pointer; font-size:0.8rem; margin-top:5px; }
footer { text-align:center; padding:30px; color:var(--text-gray); border-top:1px solid #222; margin-top:50px; }
</style>
</head>
<body>

<header>
<div class="logo">Cin√©Verse | Suggestions</div>
<p>D√©couvrez les films et s√©ries populaires</p>
<p><a href="https://ngl.link/pascal_aerus22519" target="_blank" style="color:#ffcc00;text-decoration:underline;">Suggestions anonymes</a></p>
</header>

<div class="container">
<div class="grid" id="suggestionsGrid">
    <!-- Les cartes seront inject√©es ici -->
</div>
</div>

<footer>
<p>&copy; 2026 Cin√©Verse | Cr√©√© par Pascal A√©rus</p>
</footer>

<script>
const TMDB_API_KEY = "343afb1d4a8c081ad737a2aef2f96d9a";
let currentPage = 1;
let loading = false;
const grid = document.getElementById("suggestionsGrid");

// Fonction pour cr√©er une carte
function createCard(item, type){
    const card = document.createElement("div");
    card.classList.add("card");

    const poster = item.poster_path ? `https://image.tmdb.org/t/p/w500${item.poster_path}` : 'https://via.placeholder.com/500x750?text=No+Image';
    card.innerHTML = `
        <img src="${poster}" alt="${item.title || item.name}">
        <h3>${item.title || item.name}</h3>
        <p class="overview">${item.overview || 'Pas de description.'}</p>
        <button class="toggle-overview">Voir plus</button>
        <button class="request-btn">Demander ${type==="movie"?"ce film":"cette s√©rie"}</button>
    `;

    // Voir plus
    const toggleBtn = card.querySelector(".toggle-overview");
    const p = card.querySelector(".overview");
    toggleBtn.addEventListener("click", ()=>{
        if(p.style.height === "auto"){
            p.style.height = "60px";
            toggleBtn.textContent = "Voir plus";
        } else {
            p.style.height = "auto";
            toggleBtn.textContent = "Voir moins";
        }
    });

    // Bouton demande WhatsApp
    card.querySelector(".request-btn").addEventListener("click", ()=>{
        const phone = "22996326185";
        const title = item.title || item.name;
        const message = `üé¨ *NOUVELLE DEMANDE CIN√âVERSE* üé¨%0A%0A`+
                        `üéûÔ∏è *Titre:* ${title}%0A`+
                        `üìå *Type:* ${type==="movie"?"Film":"S√©rie"}%0A`+
                        `%0A_Demande effectu√©e depuis le site web._`;
        window.open(`https://wa.me/${phone}?text=${message}`,'_blank');
    });

    grid.appendChild(card);
}

// Charger les suggestions
async function loadSuggestions(){
    if(loading) return;
    loading = true;

    // Films populaires
    let res = await fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${TMDB_API_KEY}&language=fr&page=${currentPage}`);
    let data = await res.json();
    data.results.forEach(item => createCard(item, "movie"));

    // S√©ries populaires
    res = await fetch(`https://api.themoviedb.org/3/tv/popular?api_key=${TMDB_API_KEY}&language=fr&page=${currentPage}`);
    data = await res.json();
    data.results.forEach(item => createCard(item, "tv"));

    currentPage++;
    loading = false;
}

// Scroll infini
window.addEventListener("scroll", ()=>{
    if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 200){
        loadSuggestions();
    }
});

// Charger la premi√®re page
loadSuggestions();
</script>

</body>
</html>